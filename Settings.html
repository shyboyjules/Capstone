<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Settings - Teacher Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/StyleSheet.css">
</head>
<body>
    <header>
        <h1>Teacher Dashboard</h1>
        <p>Settings</p>
        <nav>
            <ul>
                <li><a href="Home.html">Home</a></li>
                <li><a href="Students.html">Students</a></li>
                <li><a href="Statistics.html">Statistics</a></li>
                <li><a href="Settings.html" class="active">Settings</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <h2>Settings</h2>
        <section>
            <button id="logoutBtn" class="button">Logout</button>
        </section>
        <section>
            <h3>Edit Name</h3>
            <form id="editNameForm">
                <input type="text" id="newName" placeholder="Enter new name" required>
                <button type="submit" class="button">Update Name</button>
            </form>
        </section>
        <script type="module">
  import {
    getAuth,
    signOut,
    updateProfile,
    updatePassword
  } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";
  import { app } from "../DB/firebase.js";

  const auth = getAuth(app);

  // ✅ Logout button
  document.getElementById("logoutBtn").addEventListener("click", async () => {
    try {
      await signOut(auth);
      alert("You have been logged out!");
      window.location.href = "../login and register/login.html";
    } catch (error) {
      alert("Logout failed: " + error.message);
    }
  });

  // ✅ Edit display name
  document.getElementById("editNameForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const newName = document.getElementById("newName").value.trim();

    try {
      await updateProfile(auth.currentUser, { displayName: newName });
      alert("Name updated successfully!");
    } catch (error) {
      alert("Failed to update name: " + error.message);
    }
  });

  // ✅ Edit password
  document.getElementById("editPasswordForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const newPassword = document.getElementById("newPassword").value;
    const confirmNewPassword = document.getElementById("confirmNewPassword").value;

    if (newPassword !== confirmNewPassword) {
      alert("Passwords do not match!");
      return;
    }

    try {
      await updatePassword(auth.currentUser, newPassword);
      alert("Password updated successfully!");
    } catch (error) {
      alert("Failed to update password: " + error.message);
    }
  });
</script>

    </main>
</body>
</html>
